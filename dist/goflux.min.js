!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):"object"==typeof exports?exports.goflux=e():t.goflux=e()}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";var i=function(t){return t&&t.__esModule?t["default"]:t},r=i(n(2)),s=i(n(6)),o=i(n(7));e["default"]=r,e.GofluxMixin=s,e.StoreWatchMixin=o,Object.defineProperty(e,"__esModule",{value:!0})},function(t){"use strict";var e=function(t,e,n,i,r,s,o,a){if(!t){var c;if(void 0===e)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,i,r,s,o,a],h=0;c=new Error("Invariant Violation: "+e.replace(/%s/g,function(){return u[h++]}))}throw c.framesToPop=1,c}};t.exports=e},function(t,e,n){"use strict";var i=function(t){return t&&t.__esModule?t["default"]:t},r=function(){function t(t,e){for(var n in e){var i=e[n];i.configurable=!0,i.value&&(i.writable=!0)}Object.defineProperties(t,e)}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},o=i(n(3)),a=i(n(5)),c=i(n(4)),u=function(){function t(){s(this,t),this._actionsBy={},this._storeBy={}}return r(t,{registerActionsDescriptor:{value:function(t){this._actionsBy[t.name]=t}},registerStoreDescriptor:{value:function(t){this._storeBy[t.name]=t}},createContext:{value:function(){var t=new c;return t._initialize_(this._actionsBy,this._storeBy),t._publicContext}}},{defineActions:{value:function(t,e){return new o(t,e)}},defineStore:{value:function(t,e,n){return new a(t,e,n)}}}),t}();t.exports=u},function(t){"use strict";var e=function(){function t(t,e){for(var n in e){var i=e[n];i.configurable=!0,i.value&&(i.writable=!0)}Object.defineProperties(t,e)}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),n=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},i=function(){function t(e,i){n(this,t),this._name=e,this._factory=i}return e(t,{name:{get:function(){return this._name}},_create_with_context_:{value:function(t){return new this._factory(t)}}}),t}();t.exports=i},function(t,e,n){"use strict";var i=function(t){return t&&t.__esModule?t["default"]:t},r=function(){function t(t,e){for(var n in e){var i=e[n];i.configurable=!0,i.value&&(i.writable=!0)}Object.defineProperties(t,e)}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},o=i(n(8)),a=i(n(1)),c=function(){function t(){s(this,t),this._publicContext=this._create_restricted_context_("public",{getActions:!0,getStore:!0,dehydrate:!0,rehydrate:!0}),this._actionsContext=this._create_restricted_context_("actions",{dispatch:!0,getActions:!0}),this._storeContext=this._create_restricted_context_("store",{waitFor:!0,getStore:!0}),this._actionsBy={},this._storesBy={},this._dispatchTokenBy={},this._dispatcher=new o}return r(t,{dispatch:{value:function(t,e){this._dispatcher.dispatch({_event_name_:t,_payload_:e})}},getActions:{value:function(t){return this._actionsBy[t]}},waitFor:{value:function(t){var e=this,n=t.map(function(t){return e._dispatchTokenBy[t]});this._dispatcher.waitFor(n)}},getStore:{value:function(t){return this._storesBy[t]}},dehydrate:{value:function(){var t={},e=this,n=e._storesBy;for(var i in n)t[i]=n[i].dehydrate();return t}},rehydrate:{value:function(t){var e=this,n=e._storesBy;for(var i in t)n[i].rehydrate(t[i]);return this}},_create_restricted_context_:{value:function(t,e){var n={value:function(){a(!1,"function called on restricted (%s) context.",t)}},i={};return u.forEach(function(t){var r=!e[t];r&&(i[t]=n)}),Object.create(this,i)}},_initialize_:{value:function(t,e){for(var n in t){var i=t[n],r=i._create_with_context_(this._actionsContext);this._actionsBy[n]=r}for(var s in e){var o=e[s],a=o._create_with_context_(this._storeContext),c=a.storeInstance,u=a.dispatchHandler;this._storesBy[s]=c,this._dispatchTokenBy[s]=this._dispatcher.register(u)}}}}),t}(),u=Object.getOwnPropertyNames(c.prototype);t.exports=c},function(t,e,n){"use strict";function i(t,e){return function(n){var i=e[n._event_name_];i&&t[i](n._payload_)}}var r=function(){function t(t,e){for(var n in e){var i=e[n];i.configurable=!0,i.value&&(i.writable=!0)}Object.defineProperties(t,e)}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},o=n(9).EventEmitter,a=o.prototype,c=["addListener","emit","removeListener"],u=function(){function t(e,n,i){s(this,t),this._name=e,this._eventMethodMappings=n,this._factory=i}return r(t,{name:{get:function(){return this._name}},_create_with_context_:{value:function(t){var e=new this._factory(t);c.forEach(function(t){t in e||(e[t]=a[t])});var n=i(e,this._eventMethodMappings);return{storeInstance:e,dispatchHandler:n}}}}),t}();t.exports=u},function(t,e,n){"use strict";function i(t){function e(t){return t.props.gofluxContext||t.context&&t.context.gofluxContext}return{componentWillMount:function(){if(!e(this)){var t=this.constructor.displayName?" of "+this.constructor.displayName:"";s("Could not find flux on this.props or this.context%s",t)}},childContextTypes:{gofluxContext:t.PropTypes.object},contextTypes:{gofluxContext:t.PropTypes.object},getChildContext:function(){return{gofluxContext:e(this)}},gofluxActions:function(t){return e(this).getActions(t)},gofluxStore:function(t){return e(this).getStore(t)}}}var r=function(t){return t&&t.__esModule?t["default"]:t},s=r(n(1));i.componentWillMount=function(){s("GofluxMixin is a function that takes React as a parameter\n    and returns the mixin, e.g.: mixins: [GofluxMixin(React)]\n  ")},t.exports=i},function(t,e,n){"use strict";function i(t,e,n){return{componentWillMount:function(){"gofluxStore"in this||s("StoreWatchMixin requires GofluxMixin to work")},componentDidMount:function(){var i=this;t.forEach(function(t){i.gofluxStore(t).addListener(e,i[n])})},componentWillUnmount:function(){var i=this;t.forEach(function(t){i.gofluxStore(t).removeListener(e,i[n])})}}}var r=function(t){return t&&t.__esModule?t["default"]:t},s=r(n(1));i.componentWillMount=function(){s('StoreWatchMixin is a function that takes an array of store names,\n    change event name and handler function on component as parameters and\n    returns the mixin, e.g.: mixins:\n    [StoreWatchMixin(["Store1", "Store2"], "change", "_handleChange")]\n  ')},t.exports=i},function(t,e,n){"use strict";function i(){this.$Dispatcher_callbacks={},this.$Dispatcher_isPending={},this.$Dispatcher_isHandled={},this.$Dispatcher_isDispatching=!1,this.$Dispatcher_pendingPayload=null}var r=n(1),s=1,o="ID_";i.prototype.register=function(t){var e=o+s++;return this.$Dispatcher_callbacks[e]=t,e},i.prototype.unregister=function(t){r(this.$Dispatcher_callbacks[t],"Dispatcher.unregister(...): `%s` does not map to a registered callback.",t),delete this.$Dispatcher_callbacks[t]},i.prototype.waitFor=function(t){r(this.$Dispatcher_isDispatching,"Dispatcher.waitFor(...): Must be invoked while dispatching.");for(var e=0;e<t.length;e++){var n=t[e];this.$Dispatcher_isPending[n]?r(this.$Dispatcher_isHandled[n],"Dispatcher.waitFor(...): Circular dependency detected while waiting for `%s`.",n):(r(this.$Dispatcher_callbacks[n],"Dispatcher.waitFor(...): `%s` does not map to a registered callback.",n),this.$Dispatcher_invokeCallback(n))}},i.prototype.dispatch=function(t){r(!this.$Dispatcher_isDispatching,"Dispatch.dispatch(...): Cannot dispatch in the middle of a dispatch."),this.$Dispatcher_startDispatching(t);try{for(var e in this.$Dispatcher_callbacks)this.$Dispatcher_isPending[e]||this.$Dispatcher_invokeCallback(e)}finally{this.$Dispatcher_stopDispatching()}},i.prototype.isDispatching=function(){return this.$Dispatcher_isDispatching},i.prototype.$Dispatcher_invokeCallback=function(t){this.$Dispatcher_isPending[t]=!0,this.$Dispatcher_callbacks[t](this.$Dispatcher_pendingPayload),this.$Dispatcher_isHandled[t]=!0},i.prototype.$Dispatcher_startDispatching=function(t){for(var e in this.$Dispatcher_callbacks)this.$Dispatcher_isPending[e]=!1,this.$Dispatcher_isHandled[e]=!1;this.$Dispatcher_pendingPayload=t,this.$Dispatcher_isDispatching=!0},i.prototype.$Dispatcher_stopDispatching=function(){this.$Dispatcher_pendingPayload=null,this.$Dispatcher_isDispatching=!1},t.exports=i},function(t){function e(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(t){return"function"==typeof t}function i(t){return"number"==typeof t}function r(t){return"object"==typeof t&&null!==t}function s(t){return void 0===t}t.exports=e,e.EventEmitter=e,e.prototype._events=void 0,e.prototype._maxListeners=void 0,e.defaultMaxListeners=10,e.prototype.setMaxListeners=function(t){if(!i(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},e.prototype.emit=function(t){var e,i,o,a,c,u;if(this._events||(this._events={}),"error"===t&&(!this._events.error||r(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(i=this._events[t],s(i))return!1;if(n(i))switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:for(o=arguments.length,a=new Array(o-1),c=1;o>c;c++)a[c-1]=arguments[c];i.apply(this,a)}else if(r(i)){for(o=arguments.length,a=new Array(o-1),c=1;o>c;c++)a[c-1]=arguments[c];for(u=i.slice(),o=u.length,c=0;o>c;c++)u[c].apply(this,a)}return!0},e.prototype.addListener=function(t,i){var o;if(!n(i))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,n(i.listener)?i.listener:i),this._events[t]?r(this._events[t])?this._events[t].push(i):this._events[t]=[this._events[t],i]:this._events[t]=i,r(this._events[t])&&!this._events[t].warned){var o;o=s(this._maxListeners)?e.defaultMaxListeners:this._maxListeners,o&&o>0&&this._events[t].length>o&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())}return this},e.prototype.on=e.prototype.addListener,e.prototype.once=function(t,e){function i(){this.removeListener(t,i),r||(r=!0,e.apply(this,arguments))}if(!n(e))throw TypeError("listener must be a function");var r=!1;return i.listener=e,this.on(t,i),this},e.prototype.removeListener=function(t,e){var i,s,o,a;if(!n(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(i=this._events[t],o=i.length,s=-1,i===e||n(i.listener)&&i.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(r(i)){for(a=o;a-->0;)if(i[a]===e||i[a].listener&&i[a].listener===e){s=a;break}if(0>s)return this;1===i.length?(i.length=0,delete this._events[t]):i.splice(s,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},e.prototype.removeAllListeners=function(t){var e,i;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(i=this._events[t],n(i))this.removeListener(t,i);else for(;i.length;)this.removeListener(t,i[i.length-1]);return delete this._events[t],this},e.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?n(this._events[t])?[this._events[t]]:this._events[t].slice():[]},e.listenerCount=function(t,e){var i;return i=t._events&&t._events[e]?n(t._events[e])?1:t._events[e].length:0}}])});